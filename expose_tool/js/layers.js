var aoiUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_aoi_exposure_tool/FeatureServer/0";
//Chemical
var solidwasteUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Solid_Waste_Landfill_Facilities/FeatureServer/0";
var frcfacilityUrl ="https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/EPA_Emergency_Response_ER_Risk_Management_Plan_RMP_Facilities/FeatureServer/0";
//Transportation
var airportsUrl = "https://services6.arcgis.com/ssFJjBXIUyZDrSYZ/arcgis/rest/services/US_Airport/FeatureServer/0";
var nbiUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/National_Bridge_Inventory_(NBI)_Bridges/FeatureServer/0";
var portUrl = "https://maps.bts.dot.gov/services/rest/services/NTAD/Ports/MapServer/0";
var railroadUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Railroads/FeatureServer/0";
var railstationUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Routes_and_Stations/FeatureServer/0";
var trafficUrl = "https://traffic.arcgis.com/arcgis/rest/services/World/Traffic/MapServer/1";
// Communications Lifeline
var antennaUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Antenna_Structure_Registrate/FeatureServer/0";
var cellserviceUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Cellular_Service_Areas/FeatureServer/0";
var celltowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Cellular_Towers/FeatureServer/0";
var tvbroadcastUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/TV_Broadcast_Contours/FeatureServer/0";
var fmtowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/FM_Transmission_Towers/FeatureServer/0";
var amtowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/AM_Transmission_Towers/FeatureServer/0";
var pagingtowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Paging_Transmission_Towers/FeatureServer/0";
var landprivtowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Land_Mobile_Private_Transmission_Towers/FeatureServer/0";
var landbroadtowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Land_Mobile_Broadcast_Towers/FeatureServer/0"
var landcommericaltowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Land_Mobile_Commercial_Transmission_Towers/FeatureServer/0";
var microwavetowerUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Microwave_Service_Towers/FeatureServer/0";
//Safety and Security Lifeline
var firestationsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Fire_Stations/FeatureServer/0";
var hurricaneevacUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Hurricane_Evacuation_Routes/FeatureServer/0"
var localeocsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Local_Emergency_Operations_Centers_EOC/FeatureServer/0";
var policestationsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Local_Law_Enforcement_Locations/FeatureServer/0";
var psap911Url = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/PSAP_911_Service_Area_Boundaries/FeatureServer/0";
//Food Water Sheltering Lifeline
var walmartUrl = "https://services1.arcgis.com/Nt1b6lBKgKX3wost/arcgis/rest/services/Walmart_Locations/FeatureServer/0";
var publicschoolUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Public_Schools/FeatureServer/0";
var privateschoolUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Private_Schools/FeatureServer/0";
var daycareUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Day_Care_Centers/FeatureServer/0";
var collegeUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Colleges_and_Universities/FeatureServer/0";
//Health and Medical Lifeline
var hospitalsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Hospitals/FeatureServer/0";
var nursingUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/NursingHomes/FeatureServer/0";
var pharmUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Pharmacies/FeatureServer/0";
var urgentUrl ="https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Urgent_Care_Facilities/FeatureServer/0";
var vhaUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Veterans_Health_Administration_Medical_Facilities/FeatureServer/0";
//Hazardous Waste
var wastewaterplantsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Environmental_Protection_Agency_EPA_Facility_Registry_Service_FRS_Wastewater_Treatment_Plants/FeatureServer/0";
//Energy
var genunitUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/GeneratingUnits/FeatureServer/0";
var electric_holding_company_areasUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Electric_Holding_Company_Areas/FeatureServer/0";
var electriclinesUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Electric_Power_Transmission_Lines/FeatureServer/0";
var powerplantsUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Environmental_Protection_Agency_EPA_Facility_Registry_Service_FRS_Power_Plants/FeatureServer/0";
var ngliqpipelineUrl = "https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Natural_Gas_Liquid_Pipelines/FeatureServer/0";
//Boundaries
var arcntyUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_state_cnty_bndy/FeatureServer/1";
var laparishUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_state_cnty_bndy/FeatureServer/2";
var nmcntyUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_state_cnty_bndy/FeatureServer/3";
var okcntyUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_state_cnty_bndy/FeatureServer/4";
var txcntyUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_state_cnty_bndy/FeatureServer/5";
var rivers_concernUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_rivers_gauged/FeatureServer/0";
//Dam Sectors
const leveeUrl = "https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/r6_levees/FeatureServer/0";
var query = L.esri.query({url: aoiUrl}).where("AOI = 1").run(function(error, aoi) {
var aois = L.geoJSON(aoi);
          // document.getElementById('title').innerHTML =
          // aoi.features[0].properties.AOI_NAME;
          // document.getElementById('pop_counts').innerHTML =
          // "Total Population Exposed: "+aoi.features[0].properties.TOTPOP_CY;
          // document.getElementById('hh_counts').innerHTML =
          // "Total Households Exposed: "+aoi.features[0].properties.TOTHH_CY;

  L.esri.query({
    url: solidwasteUrl
  }).within(aois).run(function(error, solidWaste, response) {
    if (solidWaste.features.length > 0) {
    document.getElementById('solidWaste_id').classList.remove('hide_');
    document.getElementById('solidWaste_id').innerHTML =
    "Soild Waste Facilities: <b>"+solidWaste.features.length+"</b>";

    }
  });
  L.esri.query({
    url: firestationsUrl
  }).within(aois).run(function(error, firestations, response) {
    if (firestations.features.length > 0) {
    document.getElementById('firestation_id').classList.remove('hide_');
    document.getElementById('firestation_id').innerHTML =
    "Firestations: <b>"+firestations.features.length+"</b>";
    }
  });
  L.esri.query({
    url: localeocsUrl
  }).within(aois).run(function(error, localeocs, response) {
    if (localeocs.features.length > 0) {
    document.getElementById('localeoc_id').classList.remove('hide_');
    document.getElementById('localeoc_id').innerHTML =
    "Local Emergency Operations Centers: <b>"+localeocs.features.length+"</b>";
    }
  });
  L.esri.query({
    url: policestationsUrl
  }).within(aois).run(function(error, policestations, response) {
    if (policestations.features.length > 0) {
    document.getElementById('policestation_id').classList.remove('hide_');
    document.getElementById('policestation_id').innerHTML =
  "Policestations: <b>"+policestations.features.length+"</b>";
    }
  });
  L.esri.query({
    url: walmartUrl
  }).within(aois).run(function(error, walmart, response) {
    if (walmart.features.length > 0) {
    document.getElementById('walmart_id').classList.remove('hide_');
    document.getElementById('walmart_id').innerHTML =
    "Walmarts: <b>"+walmart.features.length+"</b>";
    }
  });
  L.esri.query({
    url: antennaUrl
  }).within(aois).run(function(error, antennas, response) {
    if (antennas.features.length > 0) {
    document.getElementById('antenna_id').classList.remove('hide_');
    document.getElementById('antenna_id').innerHTML =
    "Antennas: <b>"+antennas.features.length+"</b>";
    }
  });
  L.esri.query({
    url: amtowerUrl
  }).within(aois).run(function(error, amtower, response) {
    if (amtower.features.length > 0) {
    document.getElementById('amtower_id').classList.remove('hide_');
    document.getElementById('amtower_id').innerHTML =
    "AM Towers: <b>"+amtower.features.length+"</b>";
    }
  });
  L.esri.query({
    url: fmtowerUrl
  }).within(aois).run(function(error, fmtower, response) {
    if (fmtower.features.length > 0) {
    document.getElementById('fmtower_id').classList.remove('hide_');
    document.getElementById('fmtower_id').innerHTML =
    "FM Towers: <b>"+fmtower.features.length+"</b>";
    }
  });
  L.esri.query({
   url: celltowerUrl
 }).within(aois).run(function(error, celltower, response) {
   if (celltower.features.length > 0) {
    document.getElementById('celltower_id').classList.remove('hide_');
    document.getElementById('celltower_id').innerHTML =
    "Cell Towers: <b>"+celltower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: landbroadtowerUrl
 }).within(aois).run(function(error, landbroadtower, response) {
  if (landbroadtower.features.length > 0) {
   document.getElementById('landbroadtower_id').classList.remove('hide_');
   document.getElementById('landbroadtower_id').innerHTML =
    "Land Mobile Broadcast Towers: <b>"+landbroadtower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: landcommericaltowerUrl
 }).within(aois).run(function(error, landcommericaltower, response) {
   if (landcommericaltower.features.length > 0) {
   document.getElementById('landcom_id').classList.remove('hide_');
   document.getElementById('landcom_id').innerHTML =
    "Land Mobile Commerical Transmission Towers: <b>"+landcommericaltower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: landprivtowerUrl
 }).within(aois).run(function(error, landprivtower, response) {
   if (landprivtower.features.length > 0) {
   document.getElementById('landprivtower_id').classList.remove('hide_');
   document.getElementById('landprivtower_id').innerHTML =
    "Land Mobile Private Transmission Towers:  <b>"+landprivtower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: microwavetowerUrl
 }).within(aois).run(function(error, microwavetower, response) {
   if (microwavetower.features.length > 0) {
   document.getElementById('microwave_id').classList.remove('hide_');
   document.getElementById('microwave_id').innerHTML =
    "Microwave Service Towers:  <b>"+microwavetower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: pagingtowerUrl
 }).within(aois).run(function(error, pagingtower, response) {
   if (pagingtower.features.length > 0) {
   document.getElementById('pagingtower_id').classList.remove('hide_');
   document.getElementById('pagingtower_id').innerHTML =
  "Paging Transmission Towers:  <b>"+pagingtower.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'AB'").run(function(error, abplants, response) {
   if (abplants.features.length > 0) {
   document.getElementById('abplants_id').classList.remove('hide_');
   document.getElementById('abplants_id').innerHTML =
   "Agriculture Crop Byproducts:  <b>"+abplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'BIT'").run(function(error, bitplants, response) {
   if (bitplants.features.length > 0) {
   document.getElementById('bitplants_id').classList.remove('hide_');
   document.getElementById('bitplants_id').innerHTML =
   "Bituminous Coal Plants:  <b>"+bitplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'BLQ'").run(function(error, blqplants, response) {
   if (blqplants.features.length > 0) {
   document.getElementById('blqplants_id').classList.remove('hide_');
   document.getElementById('blqplants_id').innerHTML =
   "Black Liquor Plants:  <b>"+blqplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'DFO'").run(function(error, dfoplants, response) {
   if (dfoplants.features.length > 0) {
   document.getElementById('dfoplants_id').classList.remove('hide_');
   document.getElementById('dfoplants_id').innerHTML =
   "Disillate Fuel Oil:  <b>"+dfoplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'LFG'").run(function(error, landfillplants, response) {
   if (landfillplants.features.length > 0) {
   document.getElementById('landfillplants_id').classList.remove('hide_');
   document.getElementById('landfillplants_id').innerHTML =
   "Landfill Gas Plants:  <b>"+landfillplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'LIG'").run(function(error, ligplants, response) {
   if (ligplants.features.length > 0) {
   document.getElementById('ligplants_id').classList.remove('hide_');
   document.getElementById('ligplants_id').innerHTML =
   "Lignite Power Plants:  <b>"+ligplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'NG'").run(function(error, ngplants, response) {
   if (ngplants.features.length > 0) {
   document.getElementById('ngplants_id').classList.remove('hide_');
   document.getElementById('ngplants_id').innerHTML =
   "Natural Gas Plants:  <b>"+ngplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'PC'").run(function(error, pcplants, response) {
   if (pcplants.features.length > 0) {
   document.getElementById('pcplants_id').classList.remove('hide_');
   document.getElementById('pcplants_id').innerHTML =
   "Petroleum Coke:  <b>"+pcplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'OG'").run(function(error, ogplants, response) {
   if (ogplants.features.length > 0) {
   document.getElementById('ogplants_id').classList.remove('hide_');
   document.getElementById('ogplants_id').innerHTML =
   "Other Gas Plants: <b>"+ogplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'SUB'").run(function(error, subplants, response) {
   if (subplants.features.length > 0) {
   document.getElementById('subplants_id').classList.remove('hide_');
   document.getElementById('subplants_id').innerHTML =
   "Subbituminous Coal Plants:  <b>"+subplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'WAT'").run(function(error, watplants, response) {
   if (watplants.features.length > 0) {
   document.getElementById('watplants_id').classList.remove('hide_');
   document.getElementById('watplants_id').innerHTML =
   "Pumped-Storage Hydro Plants:  <b>"+watplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'WDS'").run(function(error, wdsplants, response) {
   if (wdsplants.features.length > 0) {
   document.getElementById('wdsplants_id').classList.remove('hide_');
   document.getElementById('wdsplants_id').innerHTML =
   "Biomass | Wood/Wood Waste Solids:  <b>"+wdsplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'WND'").run(function(error, wndplants, response) {
   if (wndplants.features.length > 0) {
   document.getElementById('wndplants_id').classList.remove('hide_');
   document.getElementById('wndplants_id').innerHTML =
   "Wind Energy:  <b>"+wndplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU <> 'NUC'").run(function(error, powerplants, response) {
   if (powerplants.features.length > 0) {
   document.getElementById('powerplants_id').classList.remove('hide_');
   document.getElementById('powerplants_id').innerHTML =
   "Total Power Plants:  <b>"+powerplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: powerplantsUrl
 }).within(aois).where("ENERGY_SOU = 'NUC'").run(function(error, nucplants, response) {
   if (nucplants.features.length > 0) {
   document.getElementById('nucplants_id').classList.remove('hide_');
   document.getElementById('nucplants_id').innerHTML =
   "Nuclear Powerplant:  <b>"+nucplants.features.length+"</b>";
   }
 });
 L.esri.query({
   url: genunitUrl
 }).within(aois).run(function(error, genunits, response) {
   if (genunits.features.length > 0) {
   document.getElementById('genunit_id').classList.remove('hide_');
   document.getElementById('genunit_id').innerHTML =
   "Generating Units:  <b>"+genunits.features.length+"</b>";
   }
 });
 L.esri.query({
   url: collegeUrl
 }).within(aois).run(function(error, college, response) {
   if (college.features.length > 0) {
   document.getElementById('college_id').classList.remove('hide_');
   document.getElementById('college_id').innerHTML =
    "Colleges and Universities: <b>"+college.features.length+"</b>";
   }
 });
 L.esri.query({
   url: daycareUrl
 }).within(aois).run(function(error, daycare, response) {
   if (daycare.features.length > 0) {
   document.getElementById('daycare_id').classList.remove('hide_');
   document.getElementById('daycare_id').innerHTML =
    "Daycares: <b>"+daycare.features.length+"</b>";
   }
 });
 L.esri.query({
   url: publicschoolUrl
 }).within(aois).run(function(error, publicschool, response) {
   if (publicschool.features.length > 0) {
   document.getElementById('publicshools_id').classList.remove('hide_');
   document.getElementById('publicshools_id').innerHTML =
    "Public Schools: <b>"+publicschool.features.length+"</b>";
   }
 });
 L.esri.query({
   url: privateschoolUrl
 }).within(aois).run(function(error, privateschool, response) {
   if (privateschool.features.length > 0) {
   document.getElementById('privateschool_id').classList.remove('hide_');
   document.getElementById('privateschool_id').innerHTML =
    "Private Schools: <b>"+privateschool.features.length+"</b>";
   }
 });
 L.esri.query({
  url: hospitalsUrl
}).within(aois).run(function(error, hospitals, response) {
  if (hospitals.features.length > 0) {
  document.getElementById('hospitals_id').classList.remove('hide_');
  document.getElementById('hospitals_id').innerHTML =
  "Hospitals: <b>"+hospitals.features.length+"</b>";
  }
});
L.esri.query({
  url: nursingUrl
}).within(aois).run(function(error, nursing, response) {
  if (nursing.features.length > 0) {
  document.getElementById('nursing_id').classList.remove('hide_');
  document.getElementById('nursing_id').innerHTML =
   "Nursing Homess: <b>"+nursing.features.length+"</b>";
  }
});
L.esri.query({
  url: pharmUrl
}).within(aois).run(function(error, pharmacy, response) {
  if (pharmacy.features.length > 0) {
  document.getElementById('pharmacy_id').classList.remove('hide_');
  document.getElementById('pharmacy_id').innerHTML =
   "Pharmacies:  <b>"+pharmacy.features.length+"</b>";
  }
});
L.esri.query({
url: vhaUrl
}).within(aois).run(function(error, vha, response) {
if (vha.features.length > 0) {
  document.getElementById('vha_id').classList.remove('hide_');
  document.getElementById('vha_id').innerHTML =
  "Veterans Health Administration Medical Facilities:  <b>"+vha.features.length+"</b>";
}
});
L.esri.query({
url: urgentUrl
}).within(aois).run(function(error, urgent, response) {
if (urgent.features.length > 0) {
  document.getElementById('urgent_id').classList.remove('hide_');
  document.getElementById('urgent_id').innerHTML =
   "Urgent Care Facilities:   <b>"+urgent.features.length+"</b>";
}
});
L.esri.query({
url: airportsUrl
}).within(aois).run(function(error, airports, response) {
if (airports.features.length > 0) {
  document.getElementById('airport_id').classList.remove('hide_');
  document.getElementById('airport_id').innerHTML =
  "Airports: <b>"+airports.features.length+"</b>";
}
});
L.esri.query({
url: nbiUrl
}).within(aois).run(function(error, nbis, response) {
if (nbis.features.length > 0) {
  document.getElementById('nbi_id').classList.remove('hide_');
  document.getElementById('nbi_id').innerHTML =
  "National Bridge Inventory: <b>"+nbis.features.length+"</b>";
}
});
L.esri.query({
url: wastewaterplantsUrl
}).within(aois).run(function(error, wastewaterplants, response) {
if (wastewaterplants.features.length > 0) {
  document.getElementById('wastewaterplant_id').classList.remove('hide_');
  document.getElementById('wastewaterplant_id').innerHTML =
  "Wastewater Treatment Plants: <b>"+wastewaterplants.features.length+"</b>";
}
});
L.esri.query({
url:"https://services.arcgis.com/XG15cJAlne2vxtgt/arcgis/rest/services/Cam4v_ZDFDx___Bh/FeatureServer/0"
}).within(aois).run(function(error, test, response) {
var sumDay = 0;
for (var i = 0; i < test.features.length; i++){
 sumDay += test.features[i].properties.F_prototy_1;
}
var sumNight = 0;
for (var i = 0; i < test.features.length; i++){
 sumNight += test.features[i].properties.F_prototype;
}
if (test.features.length > 0) {
  document.getElementById('test_id').classList.remove('hide_');
  document.getElementById('test_id').innerHTML =
  "Population (Day): <b>"+sumDay+"</b>";
  document.getElementById('test2_id').classList.remove('hide_');
  document.getElementById('test2_id').innerHTML =
  "Population (Night): <b>"+sumNight+"</b>";
}
});
L.esri.query({
url: "https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/MSBFP2/FeatureServer/0"
}).within(aois).run(function(error, footprints, response) {
if (wastewaterplants.features.length > 0) {
  document.getElementById('footprints_id').classList.remove('hide_');
  document.getElementById('footprints_id').innerHTML =
  "Building Footprints: <b>"+wastewaterplants.features.length+"</b>";
}
});
});
